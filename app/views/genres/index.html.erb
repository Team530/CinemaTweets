<div class="container">
<p id="notice"><%= notice %></p>

<h1>Listing Genres</h1>

<table class="table table-hover table-sm">
    <thead>
        <tr>
            <th>Genre</th>
            <th>Total Films</th>
            <th colspan="1"></th>
        </tr>
    </thead>

    <tbody>
      <% @genres.each do |genre| %>
            <tr>
              <td><%= genre.genre_name %></td>
              <td><%= genre.count%></td>
              <td><%= link_to 'More Info', genre %></td>
            </tr>
      <% end %>
    </tbody>
</table>



<div class="ct-chart ct-perfect-fourth" id="chart1"></div>
</div>
<script>
  // Initialize a Line chart in the container with the ID chart1
  var x_axis = <%=raw @genre_names%>;
  var y_axis = <%=raw @genre_counts%>;
  var data = {
   labels: x_axis,
     series: [
        y_axis
   ]
 };

 var options = {
    axisY: {onlyInteger: true}
 };

 var responsiveOptions = [
   ['screen and (min-width: 641px) and (max-width: 1024px)', {
     seriesBarDistance: 10,
     chartPadding: 30,
    labelOffset: 100,
      labelDirection: 'explode',
     axisX: {
       labelInterpolationFnc: function (value) {
         return value;
       }
     }
   }],
   ['screen and (max-width: 640px)', {
     seriesBarDistance: 5,
     axisX: {
       labelInterpolationFnc: function (value) {
         return value[0];
       }
     }
   }]
 ];

 new Chartist.Bar('.ct-chart', data, options, responsiveOptions);
</script>
